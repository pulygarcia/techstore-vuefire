import{j as x,k as y,a as V,o as d,c as m,f as s,w as n,u as a,i as _,b as i,d as p,t as w,e as q}from"./index-de1de77c.js";import{u as h}from"./useImage-5c6d027a.js";import{u as k}from"./itemsStore-b03ed189.js";import{L as C}from"./Loader-6cf549cd.js";import{G as N,V as U,W as M,U as I}from"./dialog-d9e7f5fe.js";const P={class:"mt-10 container mx-auto"},A=i("h2",{class:"text-center text-2xl font-bold"},"Agregar al menú",-1),j=i("p",{class:"text-gray-600 text-center"},"Aquí podrás agregar nuevos productos a la carta.",-1),B={class:"fixed top-0 flex w-screen items-center justify-end p-2"},G={key:1,class:"flex justify-center"},L={class:"mt-5 p-10 w-full 2xl:w-2/4"},S={key:0},D=i("p",{class:"font-black"},"Imagen cargada: ",-1),E=["src"],O={__name:"AddNewItemView",setup(F){const g=x(),{onFileChange:f,imageUploaded:v,url:u}=h(),r=k(),t=y({name:"",image:"",category:"",description:"",price:""}),b=async c=>{const{image:e,...l}=c;try{await r.createItem({...l,image:u.value}),setTimeout(()=>{g.push({name:"current-menu"})},3e3)}catch(o){console.log(o)}};return(c,e)=>{const l=V("FormKit");return d(),m("div",P,[A,j,s(a(I),{open:!!a(r).successMessage,class:"relative z-50"},{default:n(()=>[i("div",B,[s(a(N),{class:"w-full max-w-sm rounded-lg bg-green-100 p-5"},{default:n(()=>[s(a(U),{class:"text-green-600 font-bold text-2xl"},{default:n(()=>[p("Éxito")]),_:1}),s(a(M),{class:"text-gray-600"},{default:n(()=>[p(w(a(r).successMessage),1)]),_:1}),i("button",{onClick:e[0]||(e[0]=o=>a(r).successMessage=""),class:"mt-4 py-1 px-8 bg-white rounded-lg text-green-600 hover:bg-gray-50 outline-none"},"Agree")]),_:1})])]),_:1},8,["open"]),a(r).loading||a(r).successMessage?(d(),_(C,{key:0})):(d(),m("div",G,[i("div",L,[s(l,{type:"form","submit-label":"Agregar producto","incomplete-message":"Por favor completa los campos",onSubmit:b,value:t},{default:n(()=>[s(l,{type:"text",name:"name",label:"Titulo",placeholder:"Nombre del producto",validation:"required","validation-messages":{required:"El título es obligatorio"},modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.name=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),s(l,{type:"file",name:"image",label:"Imagen",validation:"required","validation-messages":{required:"La imagen es obligatoria"},accept:".jpg, .png, .JPG, .PNG",onChange:a(f),modelValue:t.image,"onUpdate:modelValue":e[2]||(e[2]=o=>t.image=o)},null,8,["onChange","modelValue"]),a(v)?(d(),m("div",S,[D,i("img",{src:a(u),class:"w-32",alt:"Nuevo producto imagen"},null,8,E)])):q("",!0),s(l,{type:"select",name:"category",label:"Categoría",validation:"required","validation-messages":{required:"La categoría es obligatoria"},modelValue:t.category,"onUpdate:modelValue":e[3]||(e[3]=o=>t.category=o),modelModifiers:{number:!0},options:a(r).categoryOptions},null,8,["modelValue","options"]),s(l,{type:"text",name:"description",label:"Descripción",validation:"required","validation-messages":{required:"Por favor agregá una descripción"},modelValue:t.description,"onUpdate:modelValue":e[4]||(e[4]=o=>t.description=o)},null,8,["modelValue"]),s(l,{type:"number",name:"price",label:"Precio",placeholder:"Precio del producto",validation:"required","validation-messages":{required:"El precio es obligatorio"},min:"1",modelValue:t.price,"onUpdate:modelValue":e[5]||(e[5]=o=>t.price=o),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["value"])])]))])}}};export{O as default};
